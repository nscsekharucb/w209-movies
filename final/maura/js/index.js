var data = [ { key: "20th Century Fox", date: "01/01", value: "68.61" },
      { key: "Atlantic", date: "01/01", value: "62.02" },
      { key: "Cannon", date: "01/01", value: "63.70" },
      { key: "Cinecom", date: "01/01", value: "63.30" },
      { key: "Cinema Guild", date: "01/01", value: "51.10" },
      { key: "Columbia", date: "01/01", value: "64.31" },
      { key: "Embassy", date: "01/01", value: "64.60" },
      { key: "Empire Pictures", date: "01/01", value: "54.25" },
      { key: "Goldwyn Entertainment", date: "01/01", value: "54.52" },
      { key: "Island/Alive", date: "01/01", value: "56.62" },
      { key: "MGM", date: "01/01", value: "54.46" },
      { key: "MGM/UA Classics", date: "01/01", value: "62.54" },
      { key: "New Line", date: "01/01", value: "55.34" },
      { key: "New World", date: "01/01", value: "58.47" },
      { key: "Orion Pictures", date: "01/01", value: "65.88" },
      { key: "Paramount Pictures", date: "01/01", value: "64.58" },
      { key: "Rialto Pictures", date: "01/01", value: "53.20" },
      { key: "Samuel Goldwyn Films", date: "01/01", value: "60.01" },
      { key: "Sony Pictures", date: "01/01", value: "68.61" },
      { key: "Sony/TriStar", date: "01/01", value: "57.09" },
      { key: "United Artists", date: "01/01", value: "62.96" },
      { key: "Universal", date: "01/01", value: "70.61" },
      { key: "USA Films", date: "01/01", value: "61.59" },
      { key: "Walt Disney", date: "01/01", value: "63.84" },
      { key: "Warner Bros.", date: "01/01", value: "63.40" },
      
      { key: "20th Century Fox", date: "01/02", value: "65.91" },
      { key: "Atlantic", date: "01/02", value: "61.98" },
      { key: "Cannon", date: "01/02", value: "63.69" },
      { key: "Cinecom", date: "01/02", value: "63.28" },
      { key: "Cinema Guild", date: "01/02", value: "51.01" },
      { key: "Columbia", date: "01/02", value: "64.26" },
      { key: "Embassy", date: "01/02", value: "64.80" },
      { key: "Empire Pictures", date: "01/02", value: "53.86" },
      { key: "Goldwyn Entertainment", date: "01/02", value: "54.88" },
      { key: "Island/Alive", date: "01/02", value: "56.61" },
      { key: "MGM", date: "01/02", value: "59.50" },
      { key: "MGM/UA Classics", date: "01/02", value: "62.51" },
      { key: "New Line", date: "01/02", value: "55.82" },
      { key: "New World", date: "01/02", value: "58.39" },
      { key: "Orion Pictures", date: "01/02", value: "65.15" },
      { key: "Paramount Pictures", date: "01/02", value: "64.27" },
      { key: "Rialto Pictures", date: "01/02", value: "51.66" },
      { key: "Samuel Goldwyn Films", date: "01/02", value: "59.07" },
      { key: "Sony Pictures", date: "01/02", value: "67.08" },
      { key: "Sony/TriStar", date: "01/02", value: "57.01" },
      { key: "United Artists", date: "01/02", value: "63.35" },
      { key: "Universal", date: "01/02", value: "68.98" },
      { key: "USA Films", date: "01/02", value: "61.56" },
      { key: "Walt Disney", date: "01/02", value: "63.61" },
      { key: "Warner Bros.", date: "01/02", value: "63.47" },
      
      { key: "20th Century Fox", date: "01/03", value: "67.94" },
      { key: "Atlantic", date: "01/03", value: "61.97" },
      { key: "Cannon", date: "01/03", value: "64.12" },
      { key: "Cinecom", date: "01/03", value: "63.26" },
      { key: "Cinema Guild", date: "01/03", value: "51.28" },
      { key: "Columbia", date: "01/03", value: "64.20" },
      { key: "Embassy", date: "01/03", value: "64.64" },
      { key: "Empire Pictures", date: "01/03", value: "53.76" },
      { key: "Goldwyn Entertainment", date: "01/03", value: "54.46" },
      { key: "Island/Alive", date: "01/03", value: "56.73" },
      { key: "MGM", date: "01/03", value: "58.59" },
      { key: "MGM/UA Classics", date: "01/03", value: "62.99" },
      { key: "New Line", date: "01/03", value: "55.67" },
      { key: "New World", date: "01/03", value: "58.33" },
      { key: "Orion Pictures", date: "01/03", value: "64.98" },
      { key: "Paramount Pictures", date: "01/03", value: "64.11" },
      { key: "Rialto Pictures", date: "01/03", value: "51.80" },
      { key: "Samuel Goldwyn Films", date: "01/03", value: "59.82" },
      { key: "Sony Pictures", date: "01/03", value: "66.81" },
      { key: "Sony/TriStar", date: "01/03", value: "56.94" },
      { key: "United Artists", date: "01/03", value: "62.90" },
      { key: "Universal", date: "01/03", value: "66.85" },
      { key: "USA Films", date: "01/03", value: "61.52" },
      { key: "Walt Disney", date: "01/03", value: "64.60" },
      { key: "Warner Bros.", date: "01/03", value: "63.95" },
      
      { key: "20th Century Fox", date: "01/04", value: "67.15" },
      { key: "Atlantic", date: "01/04", value: "62.40" },
      { key: "Cannon", date: "01/04", value: "64.03" },
      { key: "Cinecom", date: "01/04", value: "63.24" },
      { key: "Cinema Guild", date: "01/04", value: "50.91" },
      { key: "Columbia", date: "01/04", value: "64.18" },
      { key: "Embassy", date: "01/04", value: "64.66" },
      { key: "Empire Pictures", date: "01/04", value: "53.72" },
      { key: "Goldwyn Entertainment", date: "01/04", value: "54.74" },
      { key: "Island/Alive", date: "01/04", value: "56.72" },
      { key: "MGM", date: "01/04", value: "57.69" },
      { key: "MGM/UA Classics", date: "01/04", value: "62.93" },
      { key: "New Line", date: "01/04", value: "56.31" },
      { key: "New World", date: "01/04", value: "58.28" },
      { key: "Orion Pictures", date: "01/04", value: "65.65" },
      { key: "Paramount Pictures", date: "01/04", value: "63.82" },
      { key: "Rialto Pictures", date: "01/04", value: "51.51" },
      { key: "Samuel Goldwyn Films", date: "01/04", value: "59.61" },
      { key: "Sony Pictures", date: "01/04", value: "66.56" },
      { key: "Sony/TriStar", date: "01/04", value: "57.79" },
      { key: "United Artists", date: "01/04", value: "63.27" },
      { key: "Universal", date: "01/04", value: "66.80" },
      { key: "USA Films", date: "01/04", value: "61.47" },
      { key: "Walt Disney", date: "01/04", value: "64.51" },
      { key: "Warner Bros.", date: "01/04", value: "63.74" },
      
      { key: "20th Century Fox", date: "01/05", value: "67.89" },
      { key: "Atlantic", date: "01/05", value: "62.36" },
      { key: "Cannon", date: "01/05", value: "63.89" },
      { key: "Cinecom", date: "01/05", value: "63.18" },
      { key: "Cinema Guild", date: "01/05", value: "50.82" },
      { key: "Columbia", date: "01/05", value: "64.12" },
      { key: "Embassy", date: "01/05", value: "64.62" },
      { key: "Empire Pictures", date: "01/05", value: "53.69" },
      { key: "Goldwyn Entertainment", date: "01/05", value: "54.66" },
      { key: "Island/Alive", date: "01/05", value: "56.70" },
      { key: "MGM", date: "01/05", value: "56.51" },
      { key: "MGM/UA Classics", date: "01/05", value: "62.89" },
      { key: "New Line", date: "01/05", value: "56.11" },
      { key: "New World", date: "01/05", value: "58.18" },
      { key: "Orion Pictures", date: "01/05", value: "65.47" },
      { key: "Paramount Pictures", date: "01/05", value: "64.35" },
      { key: "Rialto Pictures", date: "01/05", value: "52.44" },
      { key: "Samuel Goldwyn Films", date: "01/05", value: "59.39" },
      { key: "Sony Pictures", date: "01/05", value: "66.68" },
      { key: "Sony/TriStar", date: "01/05", value: "57.70" },
      { key: "United Artists", date: "01/05", value: "63.12" },
      { key: "Universal", date: "01/05", value: "71.85" },
      { key: "USA Films", date: "01/05", value: "61.41" },
      { key: "Walt Disney", date: "01/05", value: "65.36" },
      { key: "Warner Bros.", date: "01/05", value: "57.04" },
      
      { key: "20th Century Fox", date: "01/06", value: "69.11" },
      { key: "Atlantic", date: "01/06", value: "62.31" },
      { key: "Cannon", date: "01/06", value: "63.86" },
      { key: "Cinecom", date: "01/06", value: "63.14" },
      { key: "Cinema Guild", date: "01/06", value: "50.70" },
      { key: "Columbia", date: "01/06", value: "64.12" },
      { key: "Embassy", date: "01/06", value: "64.78" },
      { key: "Empire Pictures", date: "01/06", value: "53.80" },
      { key: "Goldwyn Entertainment", date: "01/06", value: "54.59" },
      { key: "Island/Alive", date: "01/06", value: "56.67" },
      { key: "MGM", date: "01/06", value: "63.43" },
      { key: "MGM/UA Classics", date: "01/06", value: "62.47" },
      { key: "New Line", date: "01/06", value: "55.92" },
      { key: "New World", date: "01/06", value: "58.15" },
      { key: "Orion Pictures", date: "01/06", value: "65.26" },
      { key: "Paramount Pictures", date: "01/06", value: "65.19" },
      { key: "Rialto Pictures", date: "01/06", value: "53.03" },
      { key: "Samuel Goldwyn Films", date: "01/06", value: "59.16" },
      { key: "Sony Pictures", date: "01/06", value: "66.86" },
      { key: "Sony/TriStar", date: "01/06", value: "57.62" },
      { key: "United Artists", date: "01/06", value: "63.07" },
      { key: "Universal", date: "01/06", value: "87.43" },
      { key: "USA Films", date: "01/06", value: "61.36" },
      { key: "Walt Disney", date: "01/06", value: "67.09" },
      { key: "Warner Bros.", date: "01/06", value: "58.99" },
      
      { key: "20th Century Fox", date: "01/07", value: "71.50" },
      { key: "Atlantic", date: "01/07", value: "62.29" },
      { key: "Cannon", date: "01/07", value: "63.84" },
      { key: "Cinecom", date: "01/07", value: "63.12" },
      { key: "Cinema Guild", date: "01/07", value: "50.58" },
      { key: "Columbia", date: "01/07", value: "64.09" },
      { key: "Embassy", date: "01/07", value: "64.94" },
      { key: "Empire Pictures", date: "01/07", value: "53.65" },
      { key: "Goldwyn Entertainment", date: "01/07", value: "54.43" },
      { key: "Island/Alive", date: "01/07", value: "56.64" },
      { key: "MGM", date: "01/07", value: "62.55" },
      { key: "MGM/UA Classics", date: "01/07", value: "62.44" },
      { key: "New Line", date: "01/07", value: "55.30" },
      { key: "New World", date: "01/07", value: "58.10" },
      { key: "Orion Pictures", date: "01/07", value: "66.87" },
      { key: "Paramount Pictures", date: "01/07", value: "65.75" },
      { key: "Rialto Pictures", date: "01/07", value: "52.84" },
      { key: "Samuel Goldwyn Films", date: "01/07", value: "58.88" },
      { key: "Sony Pictures", date: "01/07", value: "67.55" },
      { key: "Sony/TriStar", date: "01/07", value: "57.59" },
      { key: "United Artists", date: "01/07", value: "63.59" },
      { key: "Universal", date: "01/07", value: "96.28" },
      { key: "USA Films", date: "01/07", value: "61.30" },
      { key: "Walt Disney", date: "01/07", value: "63.76" },
      { key: "Warner Bros.", date: "01/07", value: "61.54" },
      
      { key: "20th Century Fox", date: "01/08", value: "70.18" },
      { key: "Atlantic", date: "01/08", value: "62.24" },
      { key: "Cannon", date: "01/08", value: "63.95" },
      { key: "Cinecom", date: "01/08", value: "63.06" },
      { key: "Cinema Guild", date: "01/08", value: "50.40" },
      { key: "Columbia", date: "01/08", value: "64.05" },
      { key: "Embassy", date: "01/08", value: "64.90" },
      { key: "Empire Pictures", date: "01/08", value: "54.18" },
      { key: "Goldwyn Entertainment", date: "01/08", value: "54.83" },
      { key: "Island/Alive", date: "01/08", value: "56.89" },
      { key: "MGM", date: "01/08", value: "61.64" },
      { key: "MGM/UA Classics", date: "01/08", value: "62.84" },
      { key: "New Line", date: "01/08", value: "55.93" },
      { key: "New World", date: "01/08", value: "58.04" },
      { key: "Orion Pictures", date: "01/08", value: "66.64" },
      { key: "Paramount Pictures", date: "01/08", value: "65.59" },
      { key: "Rialto Pictures", date: "01/08", value: "52.61" },
      { key: "Samuel Goldwyn Films", date: "01/08", value: "61.06" },
      { key: "Sony Pictures", date: "01/08", value: "67.11" },
      { key: "Sony/TriStar", date: "01/08", value: "57.54" },
      { key: "United Artists", date: "01/08", value: "63.18" },
      { key: "Universal", date: "01/08", value: "92.06" },
      { key: "USA Films", date: "01/08", value: "61.89" },
      { key: "Walt Disney", date: "01/08", value: "63.89" },
      { key: "Warner Bros.", date: "01/08", value: "62.55" },
      
      { key: "20th Century Fox", date: "01/09", value: "66.10" },
      { key: "Atlantic", date: "01/09", value: "62.20" },
      { key: "Cannon", date: "01/09", value: "64.26" },
      { key: "Cinecom", date: "01/09", value: "63.04" },
      { key: "Cinema Guild", date: "01/09", value: "50.31" },
      { key: "Columbia", date: "01/09", value: "63.98" },
      { key: "Embassy", date: "01/09", value: "64.84" },
      { key: "Empire Pictures", date: "01/09", value: "54.10" },
      { key: "Goldwyn Entertainment", date: "01/09", value: "55.21" },
      { key: "Island/Alive", date: "01/09", value: "56.84" },
      { key: "MGM", date: "01/09", value: "55.78" },
      { key: "MGM/UA Classics", date: "01/09", value: "62.79" },
      { key: "New Line", date: "01/09", value: "55.41" },
      { key: "New World", date: "01/09", value: "58.73" },
      { key: "Orion Pictures", date: "01/09", value: "66.46" },
      { key: "Paramount Pictures", date: "01/09", value: "64.84" },
      { key: "Rialto Pictures", date: "01/09", value: "52.26" },
      { key: "Samuel Goldwyn Films", date: "01/09", value: "60.83" },
      { key: "Sony Pictures", date: "01/09", value: "67.47" },
      { key: "Sony/TriStar", date: "01/09", value: "57.44" },
      { key: "United Artists", date: "01/09", value: "63.51" },
      { key: "Universal", date: "01/09", value: "81.25" },
      { key: "USA Films", date: "01/09", value: "61.82" },
      { key: "Walt Disney", date: "01/09", value: "63.47" },
      { key: "Warner Bros.", date: "01/09", value: "62.45" },
      
      { key: "20th Century Fox", date: "01/10", value: "68.40" },
      { key: "Atlantic", date: "01/10", value: "62.16" },
      { key: "Cannon", date: "01/10", value: "64.18" },
      { key: "Cinecom", date: "01/10", value: "63.36" },
      { key: "Cinema Guild", date: "01/10", value: "50.25" },
      { key: "Columbia", date: "01/10", value: "63.92" },
      { key: "Embassy", date: "01/10", value: "64.74" },
      { key: "Empire Pictures", date: "01/10", value: "54.35" },
      { key: "Goldwyn Entertainment", date: "01/10", value: "55.14" },
      { key: "Island/Alive", date: "01/10", value: "56.81" },
      { key: "MGM", date: "01/10", value: "60.37" },
      { key: "MGM/UA Classics", date: "01/10", value: "62.74" },
      { key: "New Line", date: "01/10", value: "55.54" },
      { key: "New World", date: "01/10", value: "58.65" },
      { key: "Orion Pictures", date: "01/10", value: "66.30" },
      { key: "Paramount Pictures", date: "01/10", value: "64.47" },
      { key: "Rialto Pictures", date: "01/10", value: "52.09" },
      { key: "Samuel Goldwyn Films", date: "01/10", value: "60.54" },
      { key: "Sony Pictures", date: "01/10", value: "67.44" },
      { key: "Sony/TriStar", date: "01/10", value: "57.33" },
      { key: "United Artists", date: "01/10", value: "62.87" },
      { key: "Universal", date: "01/10", value: "75.69" },
      { key: "USA Films", date: "01/10", value: "61.77" },
      { key: "Walt Disney", date: "01/10", value: "65.07" },
      { key: "Warner Bros.", date: "01/10", value: "62.50" },
      
      { key: "20th Century Fox", date: "01/11", value: "67.28" },
      { key: "Atlantic", date: "01/11", value: "62.10" },
      { key: "Cannon", date: "01/11", value: "63.80" },
      { key: "Cinecom", date: "01/11", value: "63.40" },
      { key: "Cinema Guild", date: "01/11", value: "51.18" },
      { key: "Columbia", date: "01/11", value: "63.89" },
      { key: "Embassy", date: "01/11", value: "64.72" },
      { key: "Empire Pictures", date: "01/11", value: "54.01" },
      { key: "Goldwyn Entertainment", date: "01/11", value: "55.06" },
      { key: "Island/Alive", date: "01/11", value: "56.78" },
      { key: "MGM", date: "01/11", value: "55.19" },
      { key: "MGM/UA Classics", date: "01/11", value: "62.68" },
      { key: "New Line", date: "01/11", value: "56.45" },
      { key: "New World", date: "01/11", value: "58.54" },
      { key: "Orion Pictures", date: "01/11", value: "66.12" },
      { key: "Paramount Pictures", date: "01/11", value: "64.46" },
      { key: "Rialto Pictures", date: "01/11", value: "51.96" },
      { key: "Samuel Goldwyn Films", date: "01/11", value: "60.33" },
      { key: "Sony Pictures", date: "01/11", value: "67.44" },
      { key: "Sony/TriStar", date: "01/11", value: "57.23" },
      { key: "United Artists", date: "01/11", value: "63.82" },
      { key: "Universal", date: "01/11", value: "72.50" },
      { key: "USA Films", date: "01/11", value: "61.70" },
      { key: "Walt Disney", date: "01/11", value: "64.18" },
      { key: "Warner Bros.", date: "01/11", value: "63.23" },
      
      { key: "20th Century Fox", date: "01/12", value: "68.43" },
      { key: "Atlantic", date: "01/12", value: "62.06" },
      { key: "Cannon", date: "01/12", value: "63.76" },
      { key: "Cinecom", date: "01/12", value: "3.32" },
      { key: "Cinema Guild", date: "01/12", value: "0.00" },
      { key: "Columbia", date: "01/12", value: "50.51" },
      { key: "Embassy", date: "01/12", value: "64.70" },
      { key: "Empire Pictures", date: "01/12", value: "53.93" },
      { key: "Goldwyn Entertainment", date: "01/12", value: "54.97" },
      { key: "Island/Alive", date: "01/12", value: "56.75" },
      { key: "MGM", date: "01/12", value: "64.71" },
      { key: "MGM/UA Classics", date: "01/12", value: "62.61" },
      { key: "New Line", date: "01/12", value: "56.50" },
      { key: "New World", date: "01/12", value: "57.96" },
      { key: "Orion Pictures", date: "01/12", value: "65.98" },
      { key: "Paramount Pictures", date: "01/12", value: "64.22" },
      { key: "Rialto Pictures", date: "01/12", value: "53.35" },
      { key: "Samuel Goldwyn Films", date: "01/12", value: "60.13" },
      { key: "Sony Pictures", date: "01/12", value: "67.44" },
      { key: "Sony/TriStar", date: "01/12", value: "57.15" },
      { key: "United Artists", date: "01/12", value: "63.68" },
      { key: "Universal", date: "01/12", value: "71.36" },
      { key: "USA Films", date: "01/12", value: "61.62" },
      { key: "Walt Disney", date: "01/12", value: "66.07" },
      { key: "Warner Bros.", date: "01/12", value: "56.34" }
    ];
    
    var datearray = [];
    var colorrange = [];
    
    //colorrange = ["#B30000", "#E34A33", "#FC8D59", "#FDBB84", "#FDD49E", "#FEF0D9"];
    colorrange = [
      "#3182bd", "#31a354", "#c6dbef", "#969696",
      "#e6550d", "#6baed6", "#bcbddc", "#636363",
      "#9ecae1", "#fd8d3c", "#bdbdbd", "#756bb1",
      "#fdae6b", "#8c6d31", "#dadaeb",
      "#fdd0a2", "#e7ba52", "#d9d9d9",
      "#74c476", "#9e9ac8", "#bd9e39",
      "#a1d99b", "#e7cb94", "#843c39",
      "#c7e9c0", "#ad494a", "#d6616b",
      "#e7969c"
    ];
// lightSlateGray
    //strokecolor = colorrange[0];
    strokecolor = "#000000";
    // strokecolor = "#FFFFFF";
    //strokecolor = "#696969";
    
    // parseDate = d3.time.format("%d/%Y/%m").parse;
    parseDate = d3.time.format("%d/%m").parse;
    
    margin = { top: 70, right: 30, bottom: 90, left: 90 };
    width = 650 - margin.left - margin.right;
    height = 400 - margin.top - margin.bottom;
    
    var months_list = [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December"
    ];
    
    var legendRectSize = 18;
    var legendSpacing = 4;
    var tooltip_height_top = "340px";

    var tooltip = d3
      .select("body")
      .append("div")
      .attr("class", "remove")
      .style("position", "absolute")
      .style("z-index", "30")
      .style("visibility", "hidden")
      // .style("top", "20px")
    .style("top", tooltip_height_top) // Make this dynamic 
      .style("left", "550px");
    
    x = d3.time.scale().range([0, width]);
    
    y = d3.scale.linear().range([height, 0]);
    
    z = d3.scale.ordinal().range(colorrange);
    
    xAxis = d3.svg
      .axis()
      .scale(x)
      .orient("bottom")
      // .ticks(d3.time.years, 1);
      .ticks(d3.time.months, 1);
    
    yAxis = d3.svg.axis().scale(y);
    
    yAxisr = d3.svg.axis().scale(y);
    
    stack = d3.layout
      .stack()
      .offset("silhouette")
      .values(function(d) {
        return d.values;
      })
      .x(function(d) {
        return d.date;
        console.log(d.date);
      })
      .y(function(d) {
        return d.value * 100;
      });
    
    nest = d3.nest().key(function(d) {
      return d.key;
    });
    
    area = d3.svg
      .area()
      //.interpolate("cardinal")
      .interpolate("basis")
      .x(function(d) {
        return x(d.date);
      })
      .y0(function(d) {
        return y(d.y0);
      })
      .y1(function(d) {
        return y(d.y0 + d.y);
      });
    
    svg = d3
      .select("#streamgraph")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    
    graph = data.forEach(function(d) {
      d.date = parseDate(d.date);
      d.value = +d.value;
    });
    
    layers = stack(nest.entries(data));
    
    x.domain(
      d3.extent(data, function(d) {
        return d.date;
      })
    );
    
    y.domain([
      0,
      d3.max(data, function(d) {
        return d.y0 + d.y;
      })
    ]);
    
    svg
      .selectAll(".layer")
      .data(layers)
      .enter()
      .append("path")
      .attr("class", "layer")
      .attr("d", function(d) {
        return area(d.values);
      })
      // Color of each stream
      .style("fill", function(d, i) {
        return z(i);
      });
    
    // Add x-Axis
    svg
      .append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")
      .attr("y", 5)
      .attr("x", -33)
      .attr("dy", "0.35em")
      .attr("transform", "rotate(-45)")
      .attr("style", "font-size: 12");
    
    // Add x-axis label
    svg
      .append("text") // text label for the x axis
      .attr("x", width * 3 / 8)
      .attr("dx", "1em")
      .attr("y", height + margin.bottom * 3 / 4)
      .style("text-anchor", "middle")
      .attr("style", "font-size: 16; font-family: Garamond, sans-serif")
      .text("Month of Year");
    
    // Add y-axis
    svg
      .append("g")
      .attr("class", "y axis")
      .attr("style", "font-size: 11")
      .call(yAxis.orient("left"));
    
    // Add y-axis label
    console.log(margin.left);
    svg
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("x", 0 - height / 2)
      .attr("y", 0 - margin.left * 7 / 8)
      .attr("dy", "1em")
      .attr("style", "font-size: 16; font-family: Garamond, sans-serif")
      .style("text-anchor", "middle")
      .text("Average Profit (Millions of Dollars)");
    
    // Add Legend
    // svg.append("g")



// Add Title
    svg
      .append("text")
      .attr("x", width / 2)
      .attr("y", 0 - margin.top / 2)
      .attr("text-anchor", "middle")
      .attr("style", "font-size: 20; font-family: Garamond, sans-serif")
      .style("text-decoration", "underline")
      .text("Studio Average Profit by Month");
   

    svg
      .selectAll(".layer")
      .attr("opacity", 1)
      .on("mouseover", function(d, i) {
        svg
          .selectAll(".layer")
          .transition()
          .duration(250)
          .attr("opacity", function(d, j) {
            return j != i ? 0.6 : 1;
          });
      })
      .on("mousemove", function(d, i) {
        mousex = d3.mouse(this);
        mousex = mousex[0];
        var invertedx = x.invert(mousex);
        // invertedx = invertedx.getYear() + invertedx.getDate();
        invertedx = invertedx.getMonth() + invertedx.getDate();
        var selected = d.values;
        console.log(selected);
        for (var k = 0; k < selected.length; k++) {
          datearray[k] = selected[k].date;
          // datearray[k] = datearray[k].getYear() + datearray[k].getDate();
          datearray[k] = datearray[k].getMonth() + datearray[k].getDate();
        }
    
        mousedate = datearray.indexOf(invertedx);
        pro = d.values[mousedate].value;
        mo = months_list[d.values[mousedate].value];
        // console.log(mo);
    
        d3
          .select(this)
          .classed("hover", true)
          .attr("stroke", strokecolor)
          .attr("stroke-width", "0.5px"),
           tooltip.html("<p>" + d.key + "<br>$" + pro + "</p>")
            // .html("<p>" + d.key + "<br>" + mo +"<br>" + pro + "</p>")
            .style("visibility", "visible");
      })
      .on("mouseout", function(d, i) {
        svg
          .selectAll(".layer")
          .transition()
          .duration(250)
          .attr("opacity", "1");
        d3
          .select(this)
          .classed("hover", false)
          .attr("stroke-width", "0px"),
          tooltip.html("<p>" + d.key + "<br>$" + pro + "</p>")
            .style("visibility", "hidden");
      });
    
    var vertical = d3
      .select("#streamgraph")
      .append("g")
      .attr("class", "remove")
      .style("position", "absolute")
      //.style("position", "relative")
      .style("z-index", "30")
      .style("width", "3px")
      .style("height", "240px" ) 
      .style("top", "390px") 
      .style("bottom", "30px")
      .style("left", "0px")
      .style("background", "#fff");


    d3
      .select("#streamgraph")
      .on("mousemove", function() {
        mousex = d3.mouse(this);
        mousex = mousex[0] + 5;
        vertical.style("left", mousex + "px");
      })
      .on("mouseover", function() {
        mousex = d3.mouse(this);
        mousex = mousex[0] + 5;
        vertical.style("left", mousex + "px");
      });